\chapter{Two-dimensional Pseudomanifolds}
\section{Classification of finite 2-dimensional Pseudomanifolds}
\begin{thDef}[(weak) pseudomanifold]
    \label{ch4:def:pseudomanifold}
    Let $n\in\N$. 
    \begin{itemize}
        \item
            An \emph{$n$-dimensional weak pseudomanifold (without boundary)}
            (or \emph{weak $n$-pseudomanifold}) is a simplicial complex~$K$
            of dimension~$n$ satisfying the following properties:
            \begin{itemize}
                \item
                    Every simplex of~$K$ is a face of an $n$-simplex of~$K$.
                \item
                    Every $(n{-}1)$-simplex of~$K$ is the face of exactly two
                    $n$-simplices of~$K$.
            \end{itemize}
            
        \item
            An \emph{$n$-dimensional pseudomanifold (without boundary)} (or
            \emph{$n$-pseudomanifold}) is a weak $n$-pseudomanifold~$K$ that is
            \emph{strongly connected}, that is it satisfies the following
            property:
            \begin{itemize}
                \item
                    For all $n$-simplices $F,F'$ of~$K$ there exists a $k\in\N$ and a
                    finite sequence $F=F_0,F_1,\dots,F_k=F'$ of $n$-simplices of~$K$
                    such that  $F_j\cap F_{j+1}$ is an $(n{-}1)$-simplex of~$K$ 
                    for all $j\in\setZeroto{k-1}$.
            \end{itemize}
    \end{itemize}
\end{thDef}

Suppose $K$ is a weak $n$-pseudomanifold and let $x\in\geom K$.
Then the following fact is obvious from the definition:
if $\supp(x)$ is an $n$- or $(n{-}1)$-simplex of~$K$,
we can find a neighborhood of~$x$ that is homeomorphic
to~$\R^n$. On the other hand, if the dimension of~$\supp(x)$
is less than~$n{-}1$, singularities can occur at~$x$.
% TODO: add example
Thus, the geometric realization of~$K$ partially behaves like a manifold but may
fail to be locally euclidean at some points, hence the name \emph{pseudo}manifold.

\begin{thRemark}[(weak) pseudomanifolds with boundary and manifold protocols]
    If we replace the second property in \cref{ch4:def:pseudomanifold} by
    \begin{itemize}[label=\textasteriskcentered]
        \item
            Every $(n{-}1)$-simplex of~$K$ is the face of exactly one
            or two $n$-simplices of~$K$,
    \end{itemize}
    we get pseudomanifolds \emph{with boundary}. In this thesis we are only
    concerned with loop agreement tasks on $2$-dimensional pseudomanifolds
    without boundary, but the notion of pseudomanifolds with boundary plays
    an important role in so called \emph{manifold protocols}, studied by
    Herlihy et~al. in Chapter~9 of their book~\cite{bookc:herlihyetal13}.
    Briefly, a protocol~$\Xi\colon\cI\to\cP$ is a manifold protocol if the
    complex~$\Xi(F)\subset\cP$ is a pseudomanifold with boundary for
    all~$F\in\cI$ (and $\Xi$ commutes with taking boundaries in an appropriate
    way). For instance, it is easy to see that the barycentric agreement
    protocol~$\sd_K$ \pcref{ch2:barycentricagreement} is a manifold protocol
    for all~$K\in\Simp$.
\end{thRemark}

We are now going to (topologically) classify finite weak
$2$-pseudomanifolds. (It is well known that the finiteness condition
corresponds to compactness on the topological side of geometric realizations,
but in our combinatorial context of simplicial complexes \enquote{finite}
sounds more appropriately.) The above discussion already shows that
we only have to deal with $0$-simplices in the $2$-dimensional case,
namely with vertices that do not have a euclidean neighborhood.
To identify those vertices combinatorially, we consider the \emph{star}
of a vertex:

\begin{thDef}[star of a vertex]
    Let $K$ be a simplicial complex and let $v\in V(K)$ be a vertex of~$K$.
    The \emph{star of~$v$ (in~$K$)} is the subcomplex of~$K$ that is determined
    by all simplices of~$K$ containing~$v$, formally:
    \[ \st(v) \defeq K(\{F\in K\Mid v\in F\})  . \]
\end{thDef}

\begin{thProposition}[stars in (weak) pseudomanifolds]
    \label{ch4:starinpmfd}
    %
    Let $K$ be a finite weak $2$-pseudo\-manifold and let $v\in V(K)$ be a vertex
    of~$K$.
    \begin{itemize}
        \item
            Then there exist $k\in\N$ and (up to order) unique subcomplexes
            $K_0,\dots,K_k$ of~$K$, which we call the \emph{wedge summands
            of~$\st(v)$}, with the following properties:
            \begin{itemize}[labelsep=3mm,leftmargin=!]
                \item
                    $\st(v) = \bigcup_{j=0}^k K_j$
                    and $\{v\} \in \bigcap_{j=0}^k K_j$,
                \item
                    $\forall\,j,j'\in\setZeroto k,\,j\neq j'\colon\;
                    K_j\cap K_{j'} = \bigl\{\emptyset, \{v\}\bigr\}$,
                \item
                    $\forall\,j\in\setZeroto k\colon\;
                    (\geom{K_j},\geom v) \cong (D^2,0)$.
            \end{itemize}
            
        \item
            Especially, $\geom{\st(v)}\subset\geom{K}$ is homeomorphic to a
            finite wedge of $2$-disks~$(D^2,0)$ where the base point corresponds
            to~$\geom{v}$.
    \end{itemize}
\end{thProposition}

\begin{proof}
    At first observe that the star of~$v$ is completely determined by the
    $2$-simplices containing~$v$ because every $0$- or $1$-simplex is
    contained in some $2$-simplex by definition of a pseudomanifold.
    Let $F_0=\{v,x_0,x_1\}\in K$ be a
    $2$-simplex of which $v$ is a vertex. Then the $1$-simplex
    $\{v,x_1\}$ is the face of another $2$-simplex $F_1=\{v,x_1,x_2\}$
    and so on. Since there are only finitely many simplices, this process
    must terminate, and since $\{v,x_0\}$ is also the face of another
    $2$-simplex, we obtain a finite sequence $F_0,F_1,\dots,F_k,F_{k+1}=F_0$
    of $2$-simplices of~$K$ such that $F_j\cap F_{j+1}$ is a $1$-simplex
    of which $v$ is a vertex for all $j\in\setZeroto k$. % TODO: see figure
    Clearly, $(\geom{K(\{F_0,\dots,F_k\})},\geom v)$ is pointed
    homeomorphic to $(D^2,0)$. Proceeding in the same fashion if there are more
    $2$-simplices containing~$v$, we obtain a finite number of such wedge
    summands.
    Let $F$ and $F'$ be $2$-simplices of two different wedge summands.
    Then $F\cap F'$ cannot be a $1$-simplex, because that would contradict
    the fact that every $1$-simplex is the face of exactly two $2$-simplices.
    It follows that $F\cap F' = \{v\}$, and thus, $\st(v)$ is the
    \enquote{combinatorial wedge} of the wedge summands. The second assertion
    follows by passing to the geometric realization.
    \\
\end{proof}

\begin{thTheorem}[classification of finite weak $2$-pseudomanifolds]
    \label{ch4:pmfdclass}
    %
    Let $K$ be a finite weak $2$-pseudomanifold. Then $\geom K$ is homeomorphic
    to a quotient
    \[ \coprod\nolimits_{j=1}^k S_j \surround{\;}{\Big/} {\sim}
        \mathrlap{\mkern10mu,}
    \]
    where $k\in\N$, each $S_j$ is a closed surface and $\sim$ affects only
    finitely many points; more precisely:
    $\abs{\{ x,y \Mid x\sim y,\, x\neq y \}} < \infty$.
\end{thTheorem}

\begin{proof}
    Let $V'\subset V(K)$ be the set of vertices~$v$ where $\geom v$ does not
    have a euclidean neighborhood. By \cref{ch4:starinpmfd} and a standard
    connectedness argument, these are exactly those vertices whose star consists
    of more than one wedge summand. Let $v\in V'$ and let $K_0,\dots,K_k$ be the
    components of~$\st(v)$ as in the proposition. Then we form a new complex
    out of~$K$ in the following way: remove~$v$ and add vertices
    $v_0,\dots,v_k$; then, for all $j\in\setZeroto k$, replace every $v$ in a
    simplex of~$K_j$ by~$v_j$. The result is a 2-dimensional pseudomanifold where, by
    construction, the star of each vertex~$v_j$ consists of a single component.
    By induction on~$\abs{V'}$ we obtain a complex~$K'$ such that \emph{every}
    vertex of~$K'$ has that property. By definition of pseudomanifolds and
    \cref{ch4:starinpmfd} we see that every point of~$\geom{K'}$ has a
    euclidean neighborhood, thus $\geom{K'}$ is a compact $2$-manifold, that is
    a disjoint union of closed surfaces. The simplicial projection map $K'\to K$
    (which maps the recently introduced points~$v_j$ to the point~$v$ they originated
    from) induces a surjective continuous map $\geom{K'}\to\geom{K}$, and since
    $\geom{K'}$ is compact and $\geom{K}$ is hausdorff, this map is the desired
    quotient map.
    \\
\end{proof}
